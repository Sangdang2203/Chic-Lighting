'use strict';mix_d("SBVideoCards__multi-brand-video-desktop:multi-brand-video-desktop__Rm5H77zN","exports tslib @c/metrics @c/pagemarker @c/scoped-dom @p/a-ajax @c/logger @p/A @c/aui-carousel".split(" "),function(I,k,x,J,K,v,O,W,X){function y(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var F=y(J),q=y(K),Y=y(v),P=y(O),l=y(W),Z=y(X),C=function(a,d){d=d||q["default"].cardRoot;return!a||d.matches(a)?d:d.querySelector(a)},aa=function(a,d){return(d=C("["+a+"]",d))?d.getAttribute(a):
null},ba=function(a){var d=a.url,b=a.onSuccess,e=a.onError;d?Y["default"].get(d,{success:function(c){c&&"ok"===c.status?b(c):e()},error:e,abort:e}):e()},ca=function(a){a=JSON.parse(a);return{adCreativeMetaData:{adId:a.feedbackRequestAdId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{campaignId:a.feedbackRequestCampaignId}]},adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}}},L=function(){var a=C('[data-id="afb-sponsored"]');a&&(a.style.display="block")},
ea=function(){var a=aa("data-ad-feedback");if(a){try{var d="/af/feedback-link?pl="+encodeURIComponent(JSON.stringify(ca(a)))}catch(b){d=null}return new Promise(function(a,e){ba({url:d,onSuccess:function(c){try{var b=c.html,f=C('[data-id="afb-content"]');if(f&&b){var d=C('[data-id="afb-sponsored"]');d&&(d.style.display="none");f.innerHTML=b}var D=c.script;if(D){var g=document.createElement("script");g.type="text/javascript";g.innerHTML=D;C().appendChild(g)}}catch(ya){L(),e(Error("setHtml or setScript failed"))}a("success")},
onError:function(){L();e(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},fa=function(){return function(a,d){var b,e=this;this.getTreatment=function(c){if(0===e.weblabsMap.size)P["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",e.attribution);else{if(e.weblabsMap.has(c))return e.weblabsMap.get(c);P["default"].log("Get treatment for unknown weblab","ERROR",e.attribution)}};var c=new Map;a=a.split(",").filter(function(c){return 0<
c.length});if(0<a.length)try{for(var n=k.__values(a),f=n.next();!f.done;f=n.next()){var u=f.value.split(":");c.set(u[0].trim(),u[1].trim())}}catch(da){var D={error:da}}finally{try{f&&!f.done&&(b=n.return)&&b.call(n)}finally{if(D)throw D.error;}}this.weblabsMap=c;this.attribution=d}}(),z;(function(a){a.BETA="beta";a.GAMMA="gamma";a.PROD="prod"})(z||(z={}));var Q=function(){function a(){}a.browserWindow=window;a.getStage=function(){var d=a.browserWindow&&a.browserWindow.location&&a.browserWindow.location.hostname;
return d?"localhost"===d||"mix.corp.amazon.com"===d||"development.amazon.com"===d||/^[a-z]{2}-development\.amazon\.com$/.test(d)?z.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(d)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(d)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(d)?z.GAMMA:z.PROD:z.PROD};return a}(),m=function(){function a(){}a.eventListeners={};a.addEventListener=function(d,b,e,c){a.setupListenerIfItDoesntExist(d,b);a.addCallbackWithPriority(d,b,e,c)};a.removeEventListener=function(d,b,e,c){a.removeCallbackWithPriority(d,
b,e,c)&&a.removeListenerIfNoLongerNeeded(d,b)};a.removeListenerIfNoLongerNeeded=function(d,b){0===a.eventListeners[d][b].listeners.length&&(d.removeEventListener(b,a.eventListeners[d][b].generatedCallback),delete a.eventListeners[d][b],Object.keys(a.eventListeners[d]).length&&delete a.eventListeners[d])};a.removeCallbackWithPriority=function(d,b,e,c){if(!a.eventListeners[d]||!a.eventListeners[d][b])return!1;a.eventListeners[d][b].listeners=a.eventListeners[d][b].listeners.filter(function(a){return a.priority!==
e||a.callback!==c});return!0};a.setupListenerIfItDoesntExist=function(d,b){a.eventListeners[d]||(a.eventListeners[d]={});a.eventListeners[d][b]||(a.eventListeners[d][b]={generatedCallback:a.generateCallback(d,b),listeners:[]},d.addEventListener(b,a.eventListeners[d][b].generatedCallback))};a.addCallbackWithPriority=function(d,b,e,c){a.eventListeners[d][b].listeners.push({callback:c,priority:e});a.eventListeners[d][b].listeners.sort(function(c,a){return c.priority-a.priority})};a.generateCallback=
function(d,b){return function(e){a.eventListeners[d][b].listeners.forEach(function(c){c.callback&&c.callback(e)})}};return a}(),ha=["messageId","timestamp"],ia=function(a){var d=function(){},b=function(){var c=function(){if(a.XDomainRequest){var c=new a.XDomainRequest;c.onerror=d;c.ontimeout=d;c.onprogress=d;c.onload=d;c.timeout=0;return c}if(a.XMLHttpRequest){c=new a.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{isSupported:!0,send:function(a,f){if(f&&a){var b=c();
if(!b)throw"";b.open("POST",a,!0);b.setRequestHeader&&b.setRequestHeader("Content-type","text/plain");b.send(f)}}}}(),e=function(){return{isSupported:!!a.navigator.sendBeacon,send:function(c,b){if(c&&b&&!a.navigator.sendBeacon(c,b))throw"";}}}();return{ajaxClient:b,beaconClient:e}},ja=function(){return function(a,d){var b=this;this.flush=function(c){void 0===c&&(c=!1);b.eventsQueue.length&&(c||!1!==b.browserWindow.navigator.onLine)&&(c=b.eventsQueue.length,b.sendWithPriority(b.transportationClient.beaconClient,
b.transportationClient.ajaxClient),b.resetBatch(),b.ueCount("EventsSent",c))};this.processEvent=function(c,a){void 0===a&&(a={n:1});var f=b.unloadHandlerCalled=!1;b.isValidAPICall(c)&&(f=b.addEvent(c,a));f?b.ueCount("ClientEventsSuccess"):b.ueCount("ClientEventsFailed");return f};this.getEventQueueCount=function(){return b.eventsQueue.length};this.buildCompressor=function(){var c=function(c){return c.length>("#"+b.dictionaryIndex).length||"#"===c.charAt(0)},a=function(a){if(a)switch(typeof a){case "number":return!(isNaN(a)||
Infinity===a)&&c(a.toString());case "boolean":break;case "string":return c(a);default:return!0}return!1},f=function(c){b.eventsDictionary[c]="#"+b.dictionaryIndex++;b.reverseEventsDictionary[b.eventsDictionary[c]]=c;return b.eventsDictionary[c]},d=function(c){if(a(c)){var n=0;c instanceof Array?n=2:c instanceof Function?n=null:c instanceof Object&&(n=1);switch(n){case 0:return b.eventsDictionary[c]?b.eventsDictionary[c]:f(c);case 2:var e=[];for(n=0;n<c.length;n++)e[n]=d(c[n]);return e;case 1:n={};
for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(n[b.eventsDictionary[e]?b.eventsDictionary[e]:f(e)]=-1===ha.indexOf(e)?d(c[e]):c[e]);return n}}return c};return{buildPOSTObject:function(){return b.stringify({cs:{dct:b.reverseEventsDictionary},events:b.eventsQueue})},compressData:d}};this.onBeforeUnload=function(){!0!==b.unloadHandlerCalled&&(b.flush(),b.unloadHandlerCalled=!0)};this.stringify=function(c){try{return JSON.stringify(c)}catch(n){return null}};this.resetBatch=function(){b.eventsQueue=
[];b.eventsDictionary={};b.reverseEventsDictionary={};b.dictionaryIndex=0;b.batchSize=0;b.lowPriorityTimer=0;b.highPriorityTimer=0};this.sendWithClient=function(c){if(null==b.endpoint||""===b.endpoint)b.ueCount("SushiClientEndpointMissing");else{if(c.isSupported){var a=b.compressor.buildPOSTObject();return c.send(b.endpoint,a)}throw"";}};this.sendWithPriority=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];for(a=0;a<c.length;a++){var f=c[a];try{return b.sendWithClient(f)}catch(u){}}return null};
this.startHighPriorityQueueTimer=function(){0===b.highPriorityFlushInterval?b.flush():b.highPriorityTimer||(b.highPriorityTimer=setTimeout(b.flush,b.highPriorityFlushInterval,b,!1))};this.startLowPriorityQueueTimer=function(){b.lowPriorityTimer||(b.lowPriorityTimer=setTimeout(b.flush,b.lowPriorityFlushInterval,b,!1))};this.generateMessageId=function(c,a){return c+"-"+a+"-"+b.eventSequence};this.getCurrentISODate=function(){var c=new Date,a=function(c){return 10>c?"0"+c:c};return"function"===typeof Date.prototype.toISOString?
c.toISOString():c.getUTCFullYear()+"-"+a(c.getUTCMonth()+1)+"-"+a(c.getUTCDate())+"T"+a(c.getUTCHours())+":"+a(c.getUTCMinutes())+":"+a(c.getUTCSeconds())+"."+String((c.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=function(c){c.timestamp=b.getCurrentISODate();c.sequence=b.eventSequence;c.messageId=b.generateMessageId(c.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(c){c.n?b.startHighPriorityQueueTimer():b.startLowPriorityQueueTimer()};this.encodeEvent=
function(c,a,f){a=a.length;(499===b.eventsQueue.length||524288<b.batchSize+a)&&b.flush(!0);b.batchSize+=a;c={data:b.compressor.compressData(c)};b.eventsQueue.push(c);b.startTimers(f)};this.addEvent=function(c,a){b.decorateEvent(c);var f=b.stringify(c);return f?(b.encodeEvent(c,f,a),!0):!1};this.isValidAPIParam=function(c,a){return c&&-1<c.constructor.toString().indexOf(a)};this.isMaxCallsReached=function(){b.eventSequence++;1E3<b.eventSequence&&b.ueCount("SushiClientMaxCallsReached");return 1E3<b.eventSequence};
this.isValidAPICall=function(c){return!b.isMaxCallsReached()&&b.isValidAPIParam(c,"Object")};this.ueCount=function(c,a){try{var f=0===a?0:a||(x.count(b.metricsTag+":"+c)||0)+1;x.count(b.metricsTag+":"+c,f);return f}catch(u){return O.log("SushiClient.ueCount error: "+u,"ERROR"),0}};this.browserWindow=window;this.endpoint=a;this.metricsTag=d;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=
this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=ia(this.browserWindow);this.compressor=this.buildCompressor();m.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);m.addEventListener(document,"visibilitychange",100,this.onBeforeUnload);m.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);m.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||
(this.browserWindow.app={});var e=this.browserWindow.app.willDisappear;this.browserWindow.app.willDisappear=function(){e&&e();b.onBeforeUnload()}}}(),t;(function(a){a.VIEWED="VIEWED";a.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";a.FIRST_QUARTILE="FIRST_QUARTILE";a.MIDPOINT="MIDPOINT";a.THIRD_QUARTILE="THIRD_QUARTILE";a.COMPLETE="COMPLETE";a.UNMUTE="UNMUTE"})(t||(t={}));var A;(function(a){a.ICON_TAP="IconTap";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.INHERIT="Inherit";a.WEBKIT_MUTED="WebkitMuted"})(A||(A={}));
var B;(function(a){a.ICON_TAP="IconTap";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.INHERIT="Inherit";a.DEFAULT_ON="DefaultOn"})(B||(B={}));var R;(function(a){a.SINGLE_PAGE="SINGLE_PAGE";a.CROSS_PAGE="CROSS_PAGE"})(R||(R={}));var S;(function(a){a.CONTENT_HASH="CONTENT_HASH";a.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(S||(S={}));var h;(function(a){a.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";a.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";a.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";
a.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";a.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";a.BRAND_LOGO_CLICKED="BrandLogoClicked";a.BRAND_CTA_LINK_CLICKED="BrandCtaLinkClicked";a.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";a.CAPTIONS_ENABLED="CaptionsEnabled";a.CAPTIONS_DISABLED="CaptionsDisabled";a.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";a.DUPE="Dupe";a.DUPE_BY_ADVID_CAMPAIGNID="DupeByAdvIdCampaignId";a.DUPE_BY_CONTENT_HASH="DupeByContentHash";a.HEADLINE_CLICKED="HeadlineClicked";
a.MISSING_BRAND_ELEMENT="MissingBrandElement";a.MISSING_PRODUCT_ELEMENT="MissingProductElement";a.MISSING_VIDEO_ELEMENT="MissingVideoElement";a.NO_AD_ERROR="NoAdError";a.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";a.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";a.PLAYBACK_COMPLETED="PlaybackCompleted";a.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";a.PRODUCT_CLICKED="ProductClicked";a.PRODUCT_RECEIVED="ProductReceived";a.TIME_TO_FIRST_FRAME="TimeToFirstFrame";a.VIDEO_ABORTED=
"VideoAborted";a.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";a.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";a.VIDEO_CLICKED="VideoClicked";a.VIDEO_DURATION_PLAYED="VideoDurationPlayed";a.VIDEO_OFF_SCREEN="VideoOffScreen";a.VIDEO_ON_SCREEN="VideoOnScreen";a.VIDEO_PAUSED="VideoPaused";a.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";a.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";a.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";a.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";a.VIDEO_PLAYBACK_STARTED=
"VideoPlaybackStarted";a.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";a.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";a.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";a.VIDEO_SOUND_OFF="VideoSoundOff";a.VIDEO_SOUND_ON="VideoSoundOn";a.VIDEO_SUSPENDED="VideoSuspended";a.VIDEO_VIEW="VideoView";a.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";a.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";a.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";a.VM_VIDEO_MIDPOINT=
"ViewMetricsVideoMidpoint";a.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";a.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";a.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";a.VM_POST_FAILURE="ViewMetricsPostFailure"})(h||(h={}));var g;(function(a){a.APP_VERSION="appVersion";a.ADVERTISER_ID="advertiserId";a.CAMPAIGN_ID="campaignId";a.CAROUSEL_ITEM_INDEX="carouselItemIndex";a.CAROUSEL_PAGE_NUMBER="carouselPageNumber";a.CC_TOGGLE_CAUSE="ccToggleCause";a.CC_MANDATORY="ccMandatory";a.CC_SRC="ccSrc";
a.CLIENT_ID="clientId";a.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";a.CURRENT_PAGE_URL="currentPageUrl";a.DEVICE_ENV="deviceEnv";a.DEVICE_MAKE="deviceMake";a.DEVICE_MODEL="deviceModel";a.DEVICE_OS="deviceOs";a.DEVICE_PLATFORM_VERSION="devicePlatformVersion";a.DEVICE_TYPE="deviceType";a.DROPPED_FRAMES="droppedFrames";a.ERROR_CODE="errorCode";a.ERROR_MESSAGE="errorMessage";a.EVENT_TYPE="eventType";a.HEADLINE="headline";a.IMAGE_URL="imageUrl";a.LANGUAGE="language";a.LINK_URL="linkUrl";
a.LOAD_TIME_MS="loadTimeMs";a.LOGIC="logic";a.MARKETPLACE_ID="marketplaceId";a.METRICS_IDENTIFIER="metricsIdentifier";a.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";a.NETWORK_TYPE="networkType";a.NUMBER_OF_ADS="numberOfAds";a.PAGE_NUMBER="pageNumber";a.PAGE_TYPE="pageType";a.PERCENT_DOWNLOADED="percentDownloaded";a.PRODUCT_INDEX="productIndex";a.PRODUCT_ASIN="asin";a.REASON="reason";a.RETRY_COUNT="retryCount";a.SEARCH_QUERY="searchQuery";a.SOUND_TOGGLE_METHOD="soundToggleMethod";a.STAGE="stage";
a.STATUS_CODE="statusCode";a.STORE_CTA="storeCta";a.TIME_ON_SCREEN_MS="timeOnScreenMs";a.USER_AGENT="userAgent";a.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";a.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";a.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";a.VIDEO_SRC="videoSrc";a.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";a.WAS_BUFFERING="wasBuffering";a.WEBLABS="weblabs";a.WIDGET_GROUP_ID="widgetGroupId";a.WIDGET_INDEX="widgetIndex";a.WIDGET_TYPE="widgetType";a.VIEW_METRICS_FAILURE="viewMetricsFailure"})(g||
(g={}));var ka=function(){function a(d,b,e){var c=this;void 0===e&&(e=!1);this.setClientMetricsContext=function(a){c.clientMetricsContext=a};this.reportResponseReceived=function(a){var f=c.newEvent(h.ACE_VIDEO_RESPONSE_RECEIVED,c.resetVideoAdAttributes());f[g.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;c.recordEvent(f)};this.reportNoAdError=function(){var a=c.newEvent(h.NO_AD_ERROR,c.resetVideoAdAttributes());c.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=c.newEvent(h.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,
c.resetVideoAdAttributes());c.recordEvent(a)};this.reportAdFeedbackLoadFailedFromErr=function(a){var f=c.newEvent(h.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,c.resetVideoAdAttributes());f[g.ERROR_MESSAGE]=a;c.recordEvent(f)};this.reportAdFeedbackLoadSucceeded=function(){var a=c.newEvent(h.AD_FEEDBACK_LOAD_SUCCEEDED,c.resetVideoAdAttributes());c.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=c.newEvent(h.AD_FEEDBACK_LOAD_POPOVER_OPENED,c.resetVideoAdAttributes());c.recordEvent(a)};this.reportVideoReadyForPlayback=
function(a,f,b,d,e){d=c.newEvent(h.VIDEO_READY_FOR_PLAYBACK,d);d[g.LOAD_TIME_MS]=a;d[g.RETRY_COUNT]=f;d[g.PERCENT_DOWNLOADED]=b;d[g.VIDEO_TOTAL_LENGTH_MS]=e;c.recordEvent(d)};this.reportVideoPlaybackInitiated=function(a,b){b=c.newEvent(h.VIDEO_PLAYBACK_INITIATED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportVideoPlaybackStarted=function(a,b,d,e){e=c.newEvent(h.VIDEO_PLAYBACK_STARTED,e);e[g.VIDEO_CURRENT_TIME_MS]=a;e[g.PERCENT_DOWNLOADED]=b;e[g.DROPPED_FRAMES]=d;c.recordEvent(e)};this.reportTimeToFirstFrame=
function(a,b,d,e){e=c.newEvent(h.TIME_TO_FIRST_FRAME,e);e[g.LOAD_TIME_MS]=a;e[g.PERCENT_DOWNLOADED]=b;e[g.DROPPED_FRAMES]=d;c.recordEvent(e)};this.reportVideoBufferingStarted=function(a,b,e,d){d=c.newEvent(h.VIDEO_BUFFERING_STARTED,d);d[g.VIDEO_CURRENT_TIME_MS]=a;d[g.PERCENT_DOWNLOADED]=b;d[g.DROPPED_FRAMES]=e;c.recordEvent(d)};this.reportVideoBufferingEnded=function(a,b,d,e){e=c.newEvent(h.VIDEO_BUFFERING_ENDED,e);e[g.VIDEO_CURRENT_TIME_MS]=a;e[g.PERCENT_DOWNLOADED]=b;e[g.DROPPED_FRAMES]=d;c.recordEvent(e)};
this.reportVideoPlaybackFailure=function(a,b,e,d){d=c.newEvent(h.VIDEO_PLAYBACK_FAILURE,d);d[g.VIDEO_CURRENT_TIME_MS]=a;d[g.ERROR_MESSAGE]=b;d[g.ERROR_CODE]=e;c.recordEvent(d)};this.reportVideoDurationPlayed=function(a,b,d,e){e=c.newEvent(h.VIDEO_DURATION_PLAYED,e);e[g.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;e[g.PERCENT_DOWNLOADED]=b;e[g.DROPPED_FRAMES]=d;c.recordEvent(e)};this.reportPlaybackCompleted=function(a,b,e){e=c.newEvent(h.PLAYBACK_COMPLETED,e);e[g.VIDEO_CURRENT_TIME_MS]=a;e[g.DROPPED_FRAMES]=
b;c.recordEvent(e)};this.reportVideoOnScreen=function(a,b){b=c.newEvent(h.VIDEO_ON_SCREEN,b);b[g.PERCENT_DOWNLOADED]=a;c.recordEvent(b)};this.reportVideoOffScreen=function(a,b,e,d){d=c.newEvent(h.VIDEO_OFF_SCREEN,d);d[g.TIME_ON_SCREEN_MS]=a;d[g.WAS_BUFFERING]=b;d[g.VIDEO_CURRENT_TIME_MS]=e;c.recordEvent(d)};this.reportVideoView=function(a,b,e){void 0===b&&(b=!1);e=c.newEvent(h.VIDEO_VIEW,e);e[g.CONTINUOUS_PLAYBACK_DURATION_MS]=a;c.recordEvent(e);b&&c.sushiClient.flush(!0)};this.reportVideoPauseInitiated=
function(a,b){b=c.newEvent(h.VIDEO_PAUSED_INITIATED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportVideoPaused=function(a,b,e,d){d=c.newEvent(h.VIDEO_PAUSED,d);d[g.VIDEO_CURRENT_TIME_MS]=a;d[g.PERCENT_DOWNLOADED]=b;d[g.DROPPED_FRAMES]=e;c.recordEvent(d)};this.reportVideoSoundOn=function(a,b,e){e=c.newEvent(h.VIDEO_SOUND_ON,e);e[g.VIDEO_CURRENT_TIME_MS]=a;e[g.SOUND_TOGGLE_METHOD]=b;c.recordEvent(e)};this.reportVideoSoundOff=function(a,b,e){e=c.newEvent(h.VIDEO_SOUND_OFF,e);e[g.VIDEO_CURRENT_TIME_MS]=
a;e[g.SOUND_TOGGLE_METHOD]=b;c.recordEvent(e)};this.reportCaptionsOn=function(a,b,e,d){b=c.newEvent(h.CAPTIONS_ENABLED,b);b[g.LANGUAGE]=e;b[g.CC_MANDATORY]=d;b[g.CC_TOGGLE_CAUSE]=a;c.recordEvent(b)};this.reportCaptionsOff=function(a,b,e,d){b=c.newEvent(h.CAPTIONS_DISABLED,b);b[g.LANGUAGE]=e;b[g.CC_MANDATORY]=d;b[g.CC_TOGGLE_CAUSE]=a;c.recordEvent(b)};this.reportCaptionsLoadFailure=function(a){var b=c.newEvent(h.CAPTIONS_LOAD_FAILURE,a);b[g.CC_SRC]=a.ccSrc;c.recordEvent(b)};this.reportDupe=function(a,
b,e){a=c.newEvent(h.DUPE,a);a[g.LOGIC]=b;a[g.REASON]=e;c.recordEvent(a)};this.reportDupeByCampaignAndAdvertiserId=function(a){a=c.newEvent(h.DUPE_BY_ADVID_CAMPAIGNID,a);c.recordEvent(a)};this.reportDupeByContentHash=function(a){a=c.newEvent(h.DUPE_BY_CONTENT_HASH,a);c.recordEvent(a)};this.reportVideoClicked=function(a,b){b=c.newEvent(h.VIDEO_CLICKED,b,c.getDynamicMetricsAttributes());b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportProductClicked=function(a,b,e){b=c.newEvent(h.PRODUCT_CLICKED,
b,c.getDynamicMetricsAttributes());b[g.VIDEO_CURRENT_TIME_MS]=a;e&&(a=e.productIndex,b[g.PRODUCT_ASIN]=e.asin,b[g.PRODUCT_INDEX]=a);c.recordEvent(b)};this.reportProductReceived=function(a,b,e){b=c.newEvent(h.PRODUCT_RECEIVED,b,c.getDynamicMetricsAttributes());b[g.VIDEO_CURRENT_TIME_MS]=a;e&&(b[g.PRODUCT_ASIN]=e.asin);c.recordEvent(b)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=c.newEvent(h.PLAYBACK_FAILED_TO_START_AFTER_PLAY,a);c.recordEvent(a)};this.reportAudioToggleIconDisplayed=function(a){a=
c.newEvent(h.AUDIO_TOGGLE_ICON_DISPLAYED,a);c.recordEvent(a)};this.reportVideoAborted=function(a,b){b=c.newEvent(h.VIDEO_ABORTED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportVideoSuspended=function(a,b){b=c.newEvent(h.VIDEO_SUSPENDED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportVideoPlayPromiseRejected=function(a,b){b=c.newEvent(h.VIDEO_PLAY_PROMISE_REJECTED,b);b[g.ERROR_MESSAGE]=a;c.recordEvent(b)};this.reportVideoPlayPromiseNotSupported=function(a){a=c.newEvent(h.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,
a);c.recordEvent(a)};this.reportMissingVideoElement=function(a){a=c.newEvent(h.MISSING_VIDEO_ELEMENT,a);c.recordEvent(a)};this.reportMissingProductElement=function(a){a=c.newEvent(h.MISSING_PRODUCT_ELEMENT,a);c.recordEvent(a)};this.reportMissingBrandElement=function(a){a=c.newEvent(h.MISSING_BRAND_ELEMENT,a);c.recordEvent(a)};this.reportBrandCtaLinkClicked=function(a,b){b=c.newEvent(h.BRAND_CTA_LINK_CLICKED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportBrandLogoClicked=function(a,b){b=
c.newEvent(h.BRAND_LOGO_CLICKED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportHeadlineClicked=function(a,b){b=c.newEvent(h.HEADLINE_CLICKED,b);b[g.VIDEO_CURRENT_TIME_MS]=a;c.recordEvent(b)};this.reportCarouselPageChanged=function(a){var b=c.newEvent(h.CAROUSEL_PAGE_CHANGED);b[g.CAROUSEL_PAGE_NUMBER]=a;c.recordEvent(b)};this.reportVideoPlayButtonTriggered=function(a,b){b=c.newEvent(h.VIDEO_PLAY_BUTTON_TRIGGERED,b);b[g.CAROUSEL_ITEM_INDEX]=a;c.recordEvent(b)};this.reportViewMetricsVideoViewed=
function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_VIEWED,a);c.recordEvent(b);c.emitViewMetrics(t.VIEWED,a)}};this.reportViewMetricsVideoProgressFiveSeconds=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_PROGRESS_FIVE_SECONDS,a);c.recordEvent(b);c.emitViewMetrics(t.PROGRESS_FIVE_SECONDS,a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_FIRST_QUARTILE,a);c.recordEvent(b);c.emitViewMetrics(t.FIRST_QUARTILE,
a)}};this.reportViewMetricsVideoMidpoint=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_MIDPOINT,a);c.recordEvent(b);c.emitViewMetrics(t.MIDPOINT,a)}};this.reportViewMetricsVideoThirdQuartile=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_THIRD_QUARTILE,a);c.recordEvent(b);c.emitViewMetrics(t.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_COMPLETE,a);c.recordEvent(b);c.emitViewMetrics(t.COMPLETE,
a)}};this.reportViewMetricsVideoUnmute=function(a){if(c.getShouldLogViewMetics()){var b=c.newEvent(h.VM_VIDEO_UNMUTE,a);c.recordEvent(b);c.emitViewMetrics(t.UNMUTE,a)}};this.reportViewMetricsPostRequestFailure=function(a,b,e){e=c.newEvent(h.VM_POST_FAILURE,e);e[g.VIEW_METRICS_FAILURE]=a;e[g.ERROR_MESSAGE]=b;c.recordEvent(e)};this.emitViewMetrics=function(a,b){var e=b.instrumentationPixelUrl;if(void 0===e||""===e)c.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",
b);else{var d=JSON.stringify({v:{def:"iab",event:a}});e="/"===e.substr(-1)?e+"v/":e+"/v/";fetch(e+encodeURI(d),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:d}).then(function(a){if(!a.ok&&0!==a.status)throw Error(a.status+" "+a.statusText);}).catch(function(e){c.reportViewMetricsPostRequestFailure(a,e.message,b)})}};this.getShouldLogViewMetics=function(){return c.shouldLogViewMetrics};this.recordEvent=function(a){c.sushiClient.processEvent(a)};this.resetVideoAdAttributes=
function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,b;return null===(b=null===(a=c.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===b?void 0:b.call(a)};this.newEvent=function(a,b,e){void 0===e&&(e={});b=k.__assign(k.__assign(k.__assign({},
c.defaultAttributes),b),e);b[g.EVENT_TYPE]=a;b[g.METRICS_SEQUENCE_NUMBER]=c.metricsSequenceNumber++;b[g.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return b};this.metricsSequenceNumber=0;this.sushiClient=new ja(b,"SBVClientMetrics");this.defaultAttributes=k.__assign({},d);this.defaultAttributes[g.USER_AGENT]=navigator.userAgent;this.shouldLogViewMetrics=e;(b=a.browserWindow&&a.browserWindow.location&&a.browserWindow.location.href)&&(this.defaultAttributes[g.CURRENT_PAGE_URL]=
b);d.pageNumber&&(d=parseInt(d.pageNumber,10),isNaN(d)||(this.defaultAttributes[g.PAGE_NUMBER]=d))}a.browserWindow=window;return a}(),la=function(a){var d=Q.getStage();switch(a){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+d+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+
d+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+d+".fe"}},ma=["motorola edge","Moto"],na=function(){var a=l["default"].capabilities.android?"android":l["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===a&&ma.forEach(function(d){navigator.userAgent.includes(d)&&(a="android")});return"desktop"===T()?"unrecognized":a},T=function(){return l["default"].capabilities.mobile?"mobile":l["default"].capabilities.tablet?"tablet":"desktop"};
v={SBV_468340:"SBV_468340"};J=k.__assign(k.__assign({},v),{SBV_366924:"SBV_366924",SBV_368847:"SBV_368847",MBV_394048:"MBV_394048",MBV_394383:"MBV_394383",SBV_391880:"SBV_391880",SBV_407091:"SBV_407091",SBV_414150:"SBV_414150",SBV_414153:"SBV_414153",SBV_427616:"SBV_427616",SBV_427647:"SBV_427647"});K=k.__assign(k.__assign({},v),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904",SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"});v=k.__assign(k.__assign({},v),{SBV_476799:"SBV_476799",SBV_485007:"SBV_485007",
SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_570459:"SBV_570459"});var U=k.__assign(k.__assign(k.__assign({},J),K),v),r;(function(a){a.C="C";a.T1="T1";a.T2="T2";a.T3="T3";a.T4="T4";a.T5="T5";a.T6="T6";a.T7="T7"})(r||(r={}));var M;(function(a){a.VIDEO_SINGLE_PRODUCT="video-single-product";a.MULTI_BRAND_VIDEO="multi-brand-video";a.VIDEO_SINGLE_BRAND="video-single-brand";a.VIDEO_STORE="video-store";a.VIDEO_STORE_PRODUCT_FEATURE="video-store-product-feature"})(M||(M={}));var oa=
function(){return function(a,d){var b=this;this.onBrandCtaLinkClicked=function(){b.metricsManager.reportBrandCtaLinkClicked(b.videoManager.getVideoCurrentTimeMs(),b.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){b.metricsManager.reportBrandLogoClicked(b.videoManager.getVideoCurrentTimeMs(),b.videoManager.videoAdAttributes)};this.metricsManager=a;this.videoManager=d}}(),pa=function(){return function(a,d){var b=this;this.attach=function(){b.element.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
b.brandEventHandler.onBrandCtaLinkClicked)})};this.element=a;this.brandEventHandler=d}}(),qa=function(){return function(a,d,b){var e=this;this.productReceived=function(){e.metricsManager.reportProductReceived(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,e.productAttributes)};this.onProductClicked=function(){e.metricsManager.reportProductClicked(e.videoManager.getVideoCurrentTimeMs(),e.videoManager.videoAdAttributes,e.productAttributes)};this.metricsManager=a;this.videoManager=
d;this.productAttributes=b}}(),ra=function(){return function(a,d){var b=this;this.attach=function(){b.productEventHandler.productReceived();b.element.querySelectorAll("a").forEach(function(a){a.addEventListener("click",b.productEventHandler.onProductClicked)})};this.element=a;this.productEventHandler=d}}(),w=function(){function a(){}a.navigatorInternal=navigator;a.isIOS=function(){return l["default"].capabilities.ios};a.isIOSWebView=function(){return l["default"].capabilities.isAmazonApp&&l["default"].capabilities.ios};
a.isWebView=function(){return l["default"].capabilities.isAmazonApp};a.isSafari=function(){return!(!a.navigatorInternal.vendor||!a.navigatorInternal.vendor.match(/apple/i))};return a}(),sa=function(){return function(a,d){var b=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(a,c){!b.viewMetricsHistoryMap.isViewedLogged&&2E3<=
a&&(b.viewMetricsHistoryMap.isViewedLogged=!0,b.metricsManager.reportViewMetricsVideoViewed(b.videoAdAttributes));!b.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=a&&(b.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,b.metricsManager.reportViewMetricsVideoProgressFiveSeconds(b.videoAdAttributes));!b.viewMetricsHistoryMap.isFirstQuartileLogged&&a>=.25*c&&(b.viewMetricsHistoryMap.isFirstQuartileLogged=!0,b.metricsManager.reportViewMetricsVideoFirstQuartile(b.videoAdAttributes));!b.viewMetricsHistoryMap.isMidpointLogged&&
a>=.5*c&&(b.viewMetricsHistoryMap.isMidpointLogged=!0,b.metricsManager.reportViewMetricsVideoMidpoint(b.videoAdAttributes));!b.viewMetricsHistoryMap.isThirdQuartileLogged&&a>=.75*c&&(b.viewMetricsHistoryMap.isThirdQuartileLogged=!0,b.metricsManager.reportViewMetricsVideoThirdQuartile(b.videoAdAttributes))};this.onVideoReadyForPlayback=function(a,c,d,f){b.metricsManager.reportVideoReadyForPlayback(a,c,d,b.videoAdAttributes,f)};this.onTimeToFirstFrame=function(a,c,d){b.metricsManager.reportTimeToFirstFrame(a,
c,d,b.videoAdAttributes)};this.onVideoPlaybackFailure=function(a,c,d){b.metricsManager.reportVideoPlaybackFailure(a,d,c,b.videoAdAttributes)};this.onVideoPlaying=function(a,c,d){b.metricsManager.reportVideoPlaybackStarted(a,c,d,b.videoAdAttributes)};this.onVideoPlaybackPaused=function(a,c,d){b.metricsManager.reportVideoPaused(a,c,d,b.videoAdAttributes)};this.onPlaybackCompleted=function(a,c){b.viewMetricsHistoryMap.isCompleteLogged||(b.viewMetricsHistoryMap.isCompleteLogged=!0,b.metricsManager.reportViewMetricsVideoComplete(b.videoAdAttributes));
b.metricsManager.reportPlaybackCompleted(a,c,b.videoAdAttributes)};this.onVideoBufferingStarted=function(a,c,d){b.bufferStartTimeMs=a;b.metricsManager.reportVideoBufferingStarted(a,c,d,b.videoAdAttributes)};this.onVideoBufferingEnded=function(a,c,d){b.bufferStartTimeMs=0;b.metricsManager.reportVideoBufferingEnded(a,c,d,b.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){b.metricsManager.reportPlaybackFailedToStartAfterPlay(b.videoAdAttributes)};this.onVideoAborted=function(a){b.metricsManager.reportVideoAborted(a,
b.videoAdAttributes)};this.onVideoSuspended=function(a){b.metricsManager.reportVideoSuspended(a,b.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(a){b.metricsManager.reportVideoPlayPromiseRejected(a,b.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=function(){b.metricsManager.reportVideoPlayPromiseNotSupported(b.videoAdAttributes)};this.onVideoMuted=function(a,c){b.metricsManager.reportVideoSoundOff(a,c,b.videoAdAttributes)};this.onVideoUnmuted=function(a,c){b.viewMetricsHistoryMap.isUnmuteLogged||
(b.viewMetricsHistoryMap.isUnmuteLogged=!0,b.metricsManager.reportViewMetricsVideoUnmute(b.videoAdAttributes));b.metricsManager.reportVideoSoundOn(a,c,b.videoAdAttributes)};this.onCcOn=function(a,c,d){b.metricsManager.reportCaptionsOn(a,b.videoAdAttributes,c,d)};this.onCcOff=function(a,c,d){b.metricsManager.reportCaptionsOff(a,b.videoAdAttributes,c,d)};this.onCcLoadFailure=function(){b.metricsManager.reportCaptionsLoadFailure(b.videoAdAttributes)};this.onVideoDurationPlayed=function(a,c,d){b.metricsManager.reportVideoDurationPlayed(a,
c,d,b.videoAdAttributes)};this.onVideoClicked=function(a){b.metricsManager.reportVideoClicked(a,b.videoAdAttributes)};this.onVideoOnScreen=function(a){b.metricsManager.reportVideoOnScreen(a,b.videoAdAttributes)};this.onVideoOffScreen=function(a,c){b.metricsManager.reportVideoOffScreen(a,0!==b.bufferStartTimeMs,c,b.videoAdAttributes)};this.onVideoPlaybackInitiated=function(a){b.metricsManager.reportVideoPlaybackInitiated(a,b.videoAdAttributes)};this.onVideoPauseInitiated=function(a){b.metricsManager.reportVideoPauseInitiated(a,
b.videoAdAttributes)};this.onVideoViewed=function(a){b.metricsManager.reportVideoView(a,w.isIOSWebView(),b.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){b.metricsManager.reportAudioToggleIconDisplayed(b.videoAdAttributes)};this.metricsManager=a;this.videoAdAttributes=d;this.bufferStartTimeMs=0}}(),V=function(){return function(a,d){var b=this;this.reportIfBoundaryCrossed=function(a,c,d,f,g){b.isValidBoundaryTime(d)&&(a<=c?b.insideInterval(a,c)&&b.callback(b.boundaryTime,f,g):(b.insideInterval(0,
c)||b.insideInterval(a,d))&&b.callback(b.boundaryTime,f,g))};this.insideInterval=function(a,c){return b.boundaryTime>a&&b.boundaryTime<=c};this.isValidBoundaryTime=function(a){return 0<=b.boundaryTime&&b.boundaryTime<=a};this.boundaryTime=a;this.callback=d}}(),p;(function(a){a.PLAYING="playing";a.PAUSED="paused";a.BUFFERING="buffering";a.INITIATED="initiated";a.END="ended"})(p||(p={}));var ta=function(){return function(a,d,b,e){var c=this;void 0===b&&(b=[]);void 0===e&&(e=[]);this.play=function(a){c.initiatedPlayTime||
(c.initiatedPlayTime=a);return c.playbackState!==p.PLAYING&&c.videoElement.paused?(a=c.playInternal())?a:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){c.playbackState!==p.PAUSED&&c.playbackState===p.PLAYING&&(c.playbackState=p.PAUSED,c.videoElement.pause())};this.seekToStart=function(){c.accrueContinuousPlaybackDuration(c.getCurrentTimeMs());c.lastOnTimeUpdateCurrentTimeMs=0;c.videoElement.currentTime=0};this.mute=function(){c.videoElement.muted=!0};this.unmute=function(){c.videoElement.muted=
!1};this.isMuted=function(){return c.videoElement.muted};this.toggleCaptions=function(a){c.videoElement.textTracks[0].mode=a?"showing":"hidden"};this.getCaptionLang=function(){return null!=c.videoElement.textTracks[0].language?c.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=function(){return Math.round(1E3*c.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*c.videoElement.duration)};this.getDroppedFrames=function(){return c.videoElement.getVideoPlaybackQuality?
c.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==c.videoElement.webkitDroppedFrameCount?c.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return c.continuousDurationAccruedPlayTimeMs+(c.getCurrentTimeMs()-c.continuousDurationStartTimeMs)};this.resetContinuousPlaybackDurationMs=function(){var a=c.getCurrentTimeMs();c.continuousDurationAccruedPlayTimeMs=0;a===c.getDurationMs()?c.continuousDurationStartTimeMs=0:c.continuousDurationStartTimeMs=
a;c.continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var a=c.videoElement.buffered;if(!a)return 0;for(var b=0,d=0;d<a.length;d++)b+=a.end(d)-a.start(d);return b/c.videoElement.duration};this.load=function(){c.videoElement.load()};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return c.videoElement.play()};this.videoOnCanPlayEvent=function(){if(!c.assetLoaded){var a=c.getDateTime()-c.loadStartTime;c.eventHandler.onVideoReadyForPlayback(a,
c.retryLoadCount,c.getPercentDownloaded(),c.getDurationMs());c.assetLoaded=!0}};this.videoOnErrorEvent=function(){!c.assetLoaded&&3>c.retryLoadCount?(c.retryLoadCount++,setTimeout(c.videoElement.load.bind(c.videoElement),2E3)):c.handleVideoPlaybackFailureEvent()};this.videoOnPlayingEvent=function(){c.handleFirstFramePlayedEvent();if(c.playbackState===p.BUFFERING)c.eventHandler.onVideoBufferingEnded(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames());if(c.playbackState!==p.END)c.eventHandler.onVideoPlaying(c.getCurrentTimeMs(),
c.getPercentDownloaded(),c.getDroppedFrames());c.playbackState=p.PLAYING};this.videoOnPauseEvent=function(){c.videoElement.currentTime!==c.videoElement.duration&&(c.playbackState=p.PAUSED,c.eventHandler.onVideoPlaybackPaused(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames()))};this.videoOnEndedEvent=function(){return k.__awaiter(c,void 0,void 0,function(){return k.__generator(this,function(a){switch(a.label){case 0:return this.playbackState=p.END,this.accrueContinuousPlaybackDuration(this.getDurationMs()),
this.eventHandler.onPlaybackCompleted(this.getDurationMs(),this.getDroppedFrames()),[4,this.playInternal()];case 1:return a.sent(),[2]}})})};this.videoOnWaitingEvent=function(){c.playbackState=p.BUFFERING;c.eventHandler.onVideoBufferingStarted(c.getCurrentTimeMs(),c.getPercentDownloaded(),c.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var a=c.getCurrentTimeMs(),b=c.getContinuousPlaybackDurationMs();c.continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(b)});
c.boundaryChecks.forEach(function(b){b.reportIfBoundaryCrossed(c.lastOnTimeUpdateCurrentTimeMs,a,c.getDurationMs(),c.getPercentDownloaded(),c.getDroppedFrames())});c.lastOnTimeUpdateCurrentTimeMs=a;c.eventHandler.onVideoTimeUpdated(a,c.getDurationMs())};this.videoOnAbortEvent=function(){c.eventHandler.onVideoAborted(c.getCurrentTimeMs())};this.videoOnSuspendEvent=function(){c.eventHandler.onVideoSuspended(c.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!c.firstFramePlayed){var a=
c.getDateTime()-c.initiatedPlayTime;c.eventHandler.onTimeToFirstFrame(a,c.getPercentDownloaded(),c.getDroppedFrames());c.firstFramePlayed=!0}};this.handleVideoPlaybackFailureEvent=function(){if(c.videoElement.error){var a=c.translateVideoErrorCode(c.videoElement.error.code);c.eventHandler.onVideoPlaybackFailure(c.getCurrentTimeMs(),a,c.videoElement.error.message)}};this.translateVideoErrorCode=function(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";
case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return a?a.toString():"UNKNOWN"}};this.accrueContinuousPlaybackDuration=function(a){c.continuousDurationAccruedPlayTimeMs+=a-c.continuousDurationStartTimeMs;c.continuousDurationStartTimeMs=0};this.videoElement=a;this.eventHandler=d;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=b;this.continuousDurationBoundaryChecks=e;this.playbackState=p.INITIATED;this.loadStartTime=
this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstFramePlayed=!1;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onsuspend=
this.videoOnSuspendEvent;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0);if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");this.videoElement.poster=this.videoElement.dataset.poster}}(),ua=function(){function a(){}a.browserWindow=window;a.getPercentInView=function(d){try{var b=a.browserWindow.innerWidth||a.browserWindow.clientWidth||0,e=a.browserWindow.innerHeight||
a.browserWindow.clientHeight||0,c=a.getNormalizedBoundingRect(d),g=a.getViewableSegment(c.top,c.bottom,e),f=a.getViewableSegment(c.left,c.right,b);return g*f/(c.height*Math.min(c.width,b))}catch(u){return 0}};a.getViewableSegment=function(a,b,e){return a>e&&b>e?0:Math.min(0<a?e-a:0<b?Math.min(b,e):0,b-a)};a.getNormalizedBoundingRect=function(a){a=a.getBoundingClientRect();a.height=a.height||a.bottom-a.top;a.width=a.width||a.right-a.left;return a};return a}(),G=function(){function a(){}a.registeredElements=
[];a.attachedToViewWillDisappear=!1;a.browserWindow=window;a.browserDocument=document;a.registerElement=function(d,b,e,c,g,f,u){d={callback:f,dispatchOnElementInView:e,dispatchOnElementOutOfView:c,element:d,isInView:void 0,ratioInView:b,recurring:g,eventData:u};0===a.registeredElements.length&&a.attachListeners();a.registeredElements.push(d);a.handleViewChange(d)};a.deregisterElement=function(d,b,e,c,g){a.registeredElements=a.registeredElements.filter(function(a){return!(a.element===d&&a.ratioInView===
b&&a.dispatchOnElementInView===e&&a.dispatchOnElementOutOfView===c&&a.recurring===g)});0===a.registeredElements.length&&a.detachListeners()};a.emitViewabilityChange=function(d,b){d.isInView=b;d.callback(d.ratioInView,b,d.eventData);d.recurring||a.deregisterElement(d.element,d.ratioInView,d.dispatchOnElementInView,d.dispatchOnElementOutOfView,d.recurring)};a.handleRatioInViewChange=function(d,b){d.dispatchOnElementInView&&b>=d.ratioInView&&!d.isInView&&a.emitViewabilityChange(d,!0);d.dispatchOnElementOutOfView&&
b<d.ratioInView&&d.isInView&&a.emitViewabilityChange(d,!1)};a.handleBrowserHidden=function(d){a.handleRatioInViewChange(d,0)};a.handleViewChange=function(d){a.handleRatioInViewChange(d,ua.getPercentInView(d.element))};a.onBrowserHidden=function(){a.registeredElements.forEach(a.handleBrowserHidden)};a.onBrowserShown=function(){a.registeredElements.forEach(a.handleViewChange)};a.onBrowserVisibilityChange=function(){if(a.browserDocument.hidden)a.onBrowserHidden();else setTimeout(a.onBrowserShown,50)};
a.toggleBrowserVisibility=function(){a.onBrowserHidden();a.onBrowserShown()};a.attachListeners=function(){a.throttledOnBrowserViewChange||(a.throttledOnBrowserViewChange=l["default"].throttle(function(){a.registeredElements.forEach(a.handleViewChange)},50));l["default"].on("afterReady",a.throttledOnBrowserViewChange);l["default"].on(l["default"].constants.BROWSER_EVENTS.SCROLL,a.throttledOnBrowserViewChange);l["default"].on(l["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);
l["default"].on(l["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,a.throttledOnBrowserViewChange);m.addEventListener(a.browserWindow,"beforeunload",1,a.onBrowserHidden);m.addEventListener(a.browserDocument,"visibilitychange",1,a.onBrowserVisibilityChange);w.isWebView()||(m.addEventListener(a.browserWindow,"focus",1,a.onBrowserShown),m.addEventListener(a.browserWindow,"blur",1,a.onBrowserHidden));w.isSafari()&&!w.isWebView()&&(m.addEventListener(a.browserWindow,"pagehide",1,a.onBrowserHidden),
m.addEventListener(a.browserWindow,"pageshow",1,a.onBrowserShown),m.addEventListener(a.browserWindow,"popstate",1,a.toggleBrowserVisibility));a.attachToViewWillDisappear()};a.detachListeners=function(){l["default"].off("afterReady",a.throttledOnBrowserViewChange);l["default"].off(l["default"].constants.BROWSER_EVENTS.SCROLL,a.throttledOnBrowserViewChange);l["default"].off(l["default"].constants.BROWSER_EVENTS.RESIZE,a.throttledOnBrowserViewChange);l["default"].off(l["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
a.throttledOnBrowserViewChange);m.removeEventListener(a.browserDocument,"visibilitychange",1,a.onBrowserVisibilityChange);m.removeEventListener(a.browserWindow,"beforeunload",1,a.onBrowserHidden);w.isWebView()||(m.removeEventListener(a.browserWindow,"focus",1,a.onBrowserShown),m.removeEventListener(a.browserWindow,"blur",1,a.onBrowserHidden));w.isSafari()&&!w.isWebView()&&(m.removeEventListener(a.browserWindow,"pagehide",1,a.onBrowserHidden),m.removeEventListener(a.browserWindow,"pageshow",1,a.onBrowserShown),
m.removeEventListener(a.browserWindow,"popstate",1,a.toggleBrowserVisibility))};a.attachToViewWillDisappear=function(){a.attachedToViewWillDisappear||(a.attachedToViewWillDisappear=!0,a.browserWindow.app||(a.browserWindow.app={}),a.previousViewWillDisappear=a.browserWindow.app.willDisappear,a.browserWindow.app.willDisappear=function(){a.onBrowserHidden();a.previousViewWillDisappear&&a.previousViewWillDisappear()})};return a}(),va=function(){return function(a,d,b,e,c,g){var f=this;void 0===e&&(e=!1);
void 0===c&&(c=!1);void 0===g&&(g={});this.getVideoCurrentTimeMs=function(){return f.videoPlayer.getCurrentTimeMs()};this.setMuteStatus=function(a,b){f.isMuted=a;f.setMuteButtonStatus(a);f.muteClickRegion&&(a?(f.videoPlayer.mute(),f.videoEventHandler.onVideoMuted(f.getVideoCurrentTimeMs(),b)):(f.videoPlayer.unmute(),f.videoEventHandler.onVideoUnmuted(f.getVideoCurrentTimeMs(),b)))};this.play=function(){if(f.isPlaying())return Promise.resolve();f.videoPlayer.resetContinuousPlaybackDurationMs();f.videoEventHandler.onVideoPlaybackInitiated(f.getVideoCurrentTimeMs());
f.showPlayButton(!1);f.muteClickRegion&&(f.muteClickRegion.style.display="block",f.videoEventHandler.onAudioToggleIconDisplayed(),f.muteClickRegion.style.visibility="visible");if(f.ccTrack){f.ccTrack.onerror=f.ccLoadFailure;f.ccShowing=!1;if(f.ccTrackFail)f.ccLoadFailure();else if(f.ccClickRegion)f.ccClickRegion.style.display="block",f.ccClickRegion.style.visibility="visible",f.videoEventHandler.onCcOn(B.DEFAULT_ON,f.videoPlayer.getCaptionLang(),!1);else f.videoEventHandler.onCcOn(B.DEFAULT_ON,f.videoPlayer.getCaptionLang(),
!0);f.toggleCC()}return f.videoPlayer.play(Date.now()).then().catch(function(a){var b="string"===typeof a?a:"";a instanceof DOMException&&(b=a.name+": "+a.message);f.showPlayButton(!0);f.muteClickRegion&&(f.muteClickRegion.style.visibility="hidden");f.ccClickRegion&&(f.ccClickRegion.style.visibility="hidden");if(b.startsWith("NotSupported"))f.videoEventHandler.onVideoPlayPromiseNotSupported();f.videoEventHandler.onVideoPlayPromiseRejected(b)})};this.pause=function(a){f.isPaused()||(f.videoEventHandler.onVideoPauseInitiated(f.getVideoCurrentTimeMs()),
f.videoEventHandler.onVideoViewed(f.videoPlayer.getContinuousPlaybackDurationMs()),f.videoPlayer.resetContinuousPlaybackDurationMs(),!a&&f.videoOptions.shouldEnablePlayButton&&f.showPlayButton(!0),f.muteClickRegion&&(f.muteClickRegion.style.visibility="hidden"),f.ccTrack&&(f.ccClickRegion&&(f.ccClickRegion.style.visibility="hidden"),f.toggleCC()),f.videoPlayer.pause())};this.onOnePercentViewabilityChange=function(a,b){a=Date.now();b?(f.onScreenStartTime=a,f.videoEventHandler.onVideoOnScreen(f.videoPlayer.getPercentDownloaded())):
(f.videoPlayer.isMuted()||f.setMuteStatus(!0,A.VIDEO_OFF_SCREEN),f.videoEventHandler.onVideoOffScreen(a-f.onScreenStartTime,f.getVideoCurrentTimeMs()),f.onScreenStartTime=0,f.videoPlayer.seekToStart(),f.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(a,b,c){b?f.play().catch():f.pause(c)};this.setVideoOptions=function(a){f.videoOptions=a};this.isPlaying=function(){return f.videoPlayer.playbackState===p.PLAYING};this.isPaused=function(){return f.videoPlayer.playbackState===
p.PAUSED};this.buildBoundaryListeners=function(){return[new V(2E3,f.videoEventHandler.onVideoDurationPlayed),new V(15E3,f.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){f.setMuteStatus(!f.videoPlayer.isMuted(),A.ICON_TAP)};this.toggleCC=function(){f.ccShowing=!f.ccShowing;f.videoPlayer.toggleCaptions(f.ccShowing);f.ccButtonOff&&f.ccButtonOn&&(f.ccShowing?(f.videoEventHandler.onCcOn(B.ICON_TAP,f.videoPlayer.getCaptionLang(),!1),f.ccButtonOn.style.opacity="1",f.ccButtonOff.style.opacity=
"0"):(f.videoEventHandler.onCcOff(B.ICON_TAP,f.videoPlayer.getCaptionLang(),!1),f.ccButtonOn.style.opacity="0",f.ccButtonOff.style.opacity="1"))};this.showPlayButton=function(a){f.playClickRegion&&(f.playClickRegion.style.visibility=a?"inherit":"hidden")};this.ccLoadFailure=function(){f.ccTrackFail=!0;f.videoEventHandler.onCcLoadFailure();f.ccClickRegion&&(f.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(a){f.muteButton&&f.unmuteButton&&(a?(f.unmuteButton.style.fillOpacity=
"0",f.muteButton.style.fillOpacity="1"):(f.muteButton.style.fillOpacity="0",f.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){f.videoEventHandler.onVideoClicked(f.getVideoCurrentTimeMs())};this.element=a;this.videoAdAttributes=b;this.videoEventHandler=d;this.videoOptions=g;a=this.videoOptions.shouldEnablePlayButton;d=this.element.querySelector("video");b=this.buildBoundaryListeners();this.videoPlayer=new ta(d,this.videoEventHandler,b);c||this.videoPlayer.load();this.element.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
f.logClick)});if(this.muteClickRegion=this.element.querySelector('[data-type="audioToggleContainer"]'))this.muteButton=this.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),this.unmuteButton=this.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),this.setMuteButtonStatus(this.videoPlayer.isMuted()),this.muteClickRegion.addEventListener("click",this.toggleAudio),this.isMuted=this.videoPlayer.isMuted();this.ccTrackFail=!1;if(this.ccTrack=this.element.querySelector('[data-type="ccTrack"]'))this.ccTrack.onerror=
this.ccLoadFailure;if(this.ccClickRegion=this.element.querySelector('[data-type="ccToggleContainer"]'))this.ccClickRegion.style.visibility="hidden",this.ccButtonOff=this.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),this.ccButtonOn=this.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),this.ccClickRegion.addEventListener("click",this.toggleCC);this.playClickRegion=this.element.querySelector('[data-type="playIcon"]');this.showPlayButton(a);e||(G.registerElement(d,.5,!0,!0,!0,this.onFiftyPercentViewabilityChange),
G.registerElement(d,.1,!0,!0,!0,this.onOnePercentViewabilityChange))}}(),wa=function(){return function(a,d){var b=this;this.isALink=!1;this.videoManagers=[];this.impFired=[];this.carouselItemsPerPage=function(){var a=b.carouselViewport.clientWidth,c=q["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;return Math.floor(a/(c+18))};this.start=function(){return k.__awaiter(b,void 0,void 0,function(){var a,b=this;return k.__generator(this,function(c){switch(c.label){case 0:return this.carouselViewport=
q["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],this.carouselViewport.style.height="380px",a=q["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]'),a.forEach(function(a,c){c<b.carouselItemsPerPage()?b.logImpression(a,c):b.impFired[c]=!1;var d=JSON.parse(a.dataset.videoAdAttributesProps);a.style.visibility="inherit";a.querySelectorAll('[data-type="productTitle"]')[0].style.display="-webkit-box";var e=a.querySelector('[data-type="videoContainer"]'),f=a.querySelector('[data-type="productContainer"]'),
g=a.querySelector('[data-type="brandContainer"]'),h=a.querySelectorAll("a");h&&h.forEach(function(a){a.addEventListener("click",function(){b.isALink=!0})});e?f?g?(h=new sa(b.metricsManager,d),d=new va(e,h,d,!0,b.shouldDelayLoadingVideos,{shouldEnablePlayButton:!0}),b.videoManagers.push(d),G.registerElement(e,.5,!0,!0,!0,b.onFiftyPercentViewabilityChange,c),G.registerElement(e,.01,!0,!0,!0,b.onOnePercentViewabilityChange,c),e=new qa(b.metricsManager,d),(new ra(f,e)).attach(),f=new oa(b.metricsManager,
d),(new pa(g,f)).attach(),(a=a.querySelector('[data-type="playIcon"]'))&&a.addEventListener("click",function(a){return b.onPlayBtnEventTriggered(a,c)})):b.metricsManager.reportMissingBrandElement(d):b.metricsManager.reportMissingProductElement(d):b.metricsManager.reportMissingVideoElement(d)}),[4,this.carousel.initialized];case 1:return c.sent(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),[2]}})})};this.getDynamicMetricAttributes=function(){var a;return a={},a[g.CAROUSEL_ITEM_INDEX]=
b.currentPlayingIndex,a[g.CAROUSEL_PAGE_NUMBER]=b.currentCarouselPage,a};this.logImpression=function(a,c){if(!b.impFired[c]&&(a=a.querySelector('[data-type="ip"]'))){var d=a.getAttribute("data-src");d&&(a.setAttribute("src",d),b.impFired[c]=!0)}};this.updateClientMetricsContext=function(){b.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:b.getDynamicMetricAttributes})};this.onCarouselPageChange=function(a){if(void 0===a)b.metricsManager.reportCarouselPageChanged(-1);else{var c=
a.newPageNumber-1,d=a.oldPageNumber-1;b.metricsManager.reportCarouselPageChanged(c);a=b.carouselItemsPerPage();var e=c*a;d*=a;var g=a*(c+1),h=b.impFired.length;g=g<=h?g:h;for(h=e;h<g;h++){var k=q["default"].cardRoot.querySelector('[data-index="'+h+'"]');b.logImpression(k,h)}b.videoManagers[e].setMuteStatus(b.videoManagers[b.currentPlayingIndex].isMuted,A.INHERIT);b.onFiftyPercentViewabilityChange(0,!1,b.currentPlayingIndex);for(g=d;g<d+a&&g<b.videoManagers.length;g++)b.onOnePercentViewabilityChange(0,
!1,g);b.currentCarouselPage=c;b.isVideoOnCurrentCarouselPage(b.currentPlayingIndex,c)||(b.currentPlayingIndex=e);for(g=e;g<e+a&&g<b.videoManagers.length;g++)b.onOnePercentViewabilityChange(1,!0,g),b.onFiftyPercentViewabilityChange(1,!0,g)}};this.onPlayBtnEventTriggered=function(a,c){b.metricsManager.reportVideoPlayButtonTriggered(c,b.videoManagers[c].videoAdAttributes);b.pauseVideo(b.currentPlayingIndex);b.videoManagers[c].setMuteStatus(b.videoManagers[b.currentPlayingIndex].isMuted,A.INHERIT);b.playVideo(c)};
this.pauseVideo=function(a){b.videoManagers[a].pause()};this.playVideo=function(a){b.videoManagers[a].play();b.currentPlayingIndex=a};this.onFiftyPercentViewabilityChange=function(a,c,d){if(b.isVideoOnCurrentCarouselPage(d,b.currentCarouselPage))if(b.isALink)b.isALink=!1,b.videoManagers[b.currentPlayingIndex].onFiftyPercentViewabilityChange(a,c,!0);else b.videoManagers[b.currentPlayingIndex].onFiftyPercentViewabilityChange(a,c)};this.onOnePercentViewabilityChange=function(a,c,d){if(b.isVideoOnCurrentCarouselPage(d,
b.currentCarouselPage))b.videoManagers[d].onOnePercentViewabilityChange(a,c)};this.isVideoOnCurrentCarouselPage=function(a,c){var d=b.carouselItemsPerPage();c=(c+1)*d;return a>=c-d&&a<c};this.carousel=Z["default"].getCarousel(q["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=a;this.shouldDelayLoadingVideos=d;this.currentCarouselPage=this.currentPlayingIndex=0;this.updateClientMetricsContext()}}(),N=function(){return k.__awaiter(void 0,void 0,void 0,function(){var a,
d,b;return k.__generator(this,function(e){xa();if(!q["default"].cardRoot.dataset.props)return x.count("sbvMultiBrandVideoNoProps"),[2];a=JSON.parse(q["default"].cardRoot.dataset.props);d=new fa(a.weblabs,M.MULTI_BRAND_VIDEO);b=d.getTreatment(U.MBV_394048);b===r.T1||b===r.T5?F["default"].visible(E.NONE).then(function(){H(d,a,b)}):b===r.T2||b===r.T6?F["default"].visible(E.SMALL).then(function(){H(d,a,b)}):b===r.T3||b===r.T7?F["default"].visible(E.LARGE).then(function(){H(d,a,b)}):H(d,a,b);return[2]})})},
H=function(a,d,b){return k.__awaiter(void 0,void 0,void 0,function(){var e,c,g,f,h,m,p;return k.__generator(this,function(k){switch(k.label){case 0:e=a.getTreatment(U.SBV_366924)===r.T1;c=b===r.T4||b===r.T5||b===r.T6||b===r.T7;g=new ka({clientId:d.clientId,deviceEnv:l["default"].capabilities.isAmazonApp?"app":"web",deviceOs:na(),deviceType:T(),language:d.language,marketplaceId:d.marketplaceId,pageType:d.pageType,stage:Q.getStage(),weblabs:d.weblabs,widgetGroupId:d.widgetGroupId,widgetIndex:void 0,
widgetType:d.widgetType},la(d.marketplaceId),e);f=q["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]');if(null===f||void 0===f||!f.length)return x.count("sbvMultiBrandVideoNoAds"),g.reportNoAdError(),[2];2>(null===f||void 0===f?void 0:f.length)&&(x.count("sbvMultiBrandVideoNumOfAdsLessThanMin"),g.reportNumOfAdsLessThanMinRequirement());h=q["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];m=q["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];m.classList.add("featureHeading");
h.style.visibility="visible";L();g.reportResponseReceived(f.length);ea().then(function(a){g.reportAdFeedbackLoadSucceeded();(a=q["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(a){a.addEventListener("click",g.reportAdFeedbackPopoverOpened)}):x.count("sbvMultiBrandVideoAdfeedbackElementNotFound")}).catch(function(a){g.reportAdFeedbackLoadFailedFromErr(a.message||"")});p=new wa(g,c);return[4,p.start()];case 1:return k.sent(),[2]}})})},xa=function(){var a=
q["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],d=q["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];a.style.height="100%";d.style.height="100%";a=a.getElementsByClassName("a-carousel-button")[0];d=d.getElementsByClassName("a-carousel-button")[0];a.style.top="45%";d.style.top="45%"},E;(function(a){a[a.NONE=0]="NONE";a[a.SMALL=100]="SMALL";a[a.LARGE=500]="LARGE"})(E||(E={}));I._operationNames=[];I.card=function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,
function(a){F["default"].pageReady.then(N,N);return[2]})})};I.initOnReady=N});
